# Face Recognition API - Environment Variables Template
# =====================================================

# ============================================
# API CONFIGURATION
# ============================================

# Server settings
API_HOST=0.0.0.0
API_PORT=8000
API_DEBUG=false

# CORS Origins (comma-separated, or * for all)
CORS_ORIGINS=*

# ============================================
# MODEL CONFIGURATION
# ============================================

# Path to ONNX model files (relative to app directory or absolute)
# Default: app/models (automatically resolved)
# MODELS_PATH=app/models

# Face Recognizer Selection: 'sface' or 'arcface'
# - sface: 128-dim, fast, OpenCV-only
# - arcface: 512-dim, more accurate, requires onnxruntime
RECOGNIZER_TYPE=sface

# Detection threshold (0.0-1.0)
# YUNET_SCORE_THRESHOLD=0.7

# ============================================
# SFACE SETTINGS (used when RECOGNIZER_TYPE=sface)
# ============================================

# SFace model filename
# SFACE_FILENAME=face_recognition_sface_2021dec.onnx

# Recognition match threshold (0.0-1.0)
# SFACE_SIMILARITY_THRESHOLD=0.55

# ============================================
# ARCFACE SETTINGS (used when RECOGNIZER_TYPE=arcface)
# ============================================

# ArcFace model filename (downloaded via: python -m ml.download_models --arcface)
# Options: arcface.onnx (137MB, recommended) or arcface_resnet100.onnx (249MB)
# ARCFACE_FILENAME=arcface.onnx

# ArcFace similarity threshold (typically lower than SFace)
# ARCFACE_SIMILARITY_THRESHOLD=0.45

# ArcFace feature dimension (512 for most models, 128 for MobileFaceNet)
# ARCFACE_FEATURE_DIM=512

# ============================================
# DATABASE CONFIGURATION
# ============================================

# Enable database mode (true/false)
# Set to false to use test_images/ directory instead
USE_DATABASE=false

# Database Connection - Option 1: Full connection string (recommended)
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://user:password@localhost:5432/visitors_db

# Database Connection - Option 2: Individual parameters
# Uncomment and use if not using DATABASE_URL
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=visitors_db
# DB_USER=postgres
# DB_PASSWORD=

# Database Table Configuration
DB_TABLE_NAME=public."Visitor"
DB_VISITOR_ID_COLUMN=id
DB_IMAGE_COLUMN=base64Image
DB_FEATURES_COLUMN=facefeatures

# Max visitors to load (0 = all)
DB_VISITOR_LIMIT=0

# Connection pool settings
# DB_POOL_MIN_CONN=1
# DB_POOL_MAX_CONN=10

# ============================================
# HNSW INDEX CONFIGURATION
# ============================================

# Note: Index files are now named based on recognizer:
#   - SFace: hnsw_sface_128.bin, metadata_sface.pkl
#   - ArcFace: hnsw_arcface_512.bin, metadata_arcface.pkl
# This allows both indexes to coexist.

# Max vectors in index
# HNSW_MAX_ELEMENTS=100000

# Index tuning (higher = better recall, slower)
# HNSW_M=32
# HNSW_EF_CONSTRUCTION=400
# HNSW_EF_SEARCH=400

# Index file location (defaults to MODELS_PATH)
# HNSW_INDEX_DIR=

# ============================================
# LOGGING CONFIGURATION
# ============================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Optional: Log to file
# LOG_FILE=/var/log/face-recognition.log
